<div class="ngx-mat-tel-input-container">
  <mat-form-field class="country-select">
    <mat-select
      [disabled]="disabled"
      [value]="selectedCountry"
      (selectionChange)="onCountrySelect($event.value, phoneInput)"
    >
      <mat-select-trigger>
        <span [ngClass]="selectedCountry?.flagClass"></span>
        <span class="country-selector-code" *ngIf="selectedCountry?.dialCode"
          >+{{ selectedCountry.dialCode }}</span
        >
      </mat-select-trigger>
      <mat-option class="search-option">
        <ngx-mat-select-search
          [formControl]="searchCriteriaControl"
          (click)="$event.stopPropagation()"
        >
        </ngx-mat-select-search>
      </mat-option>
      <mat-option *ngFor="let country of filteredCountries" [value]="country">
        <div class="icon-wrapper">
          <div class="flag" [ngClass]="country.flagClass"></div>
        </div>
        <div class="label-wrapper">
          {{ country.name }}
        </div>
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field class="phone-input">
    <mat-label>Number</mat-label>
    <input
      matInput
      #phoneInput
      type="tel"
      autocomplete="tel"
      [ngClass]="cssClass"
      (blur)="onTouched()"
      (keypress)="onInputKeyPress($event)"
      [(ngModel)]="phoneNumber"
      (ngModelChange)="onPhoneNumberChange()"
      [errorStateMatcher]="errorStateMatcher"
      [placeholder]="inputPlaceholder"
      [disabled]="disabled"
      [aria-describedby]="describedBy"
    />
  </mat-form-field>
</div>
